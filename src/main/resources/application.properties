spring.datasource.url=jdbc:mysql://${DATASOURCE_URL}/edilek?useSSL=false&serverTimezone=UTC&allowPublicKeyRetrieval=true
spring.datasource.username=${DATASOURCE_USERNAME}
spring.datasource.password=${DATASOURCE_PASSWORD}


# Specify the postgresql dialect for Hibernate
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect

# Enable auto DDL mode to update the database schema automatically
spring.jpa.hibernate.ddl-auto=update

# The time duration for the MySQL server to close the connection,
# 7 hours (in milliseconds)
spring.datasource.hikari.max-lifetime=25200000 
# To check the health of the connection,
# 5 seconds (in milliseconds)
spring.datasource.hikari.validation-timeout=5000 
# The time duration for which connections can remain idle in the pool, and the maximum wait time,
# 10 minutes (in milliseconds)
spring.datasource.hikari.idle-timeout=600000  
# 30 seconds (in milliseconds)
spring.datasource.hikari.connection-timeout=30000  
# Test query to ensure each connection is validated before use
#spring.datasource.hikari.test-query=SELECT 1


# https
server.port=8443       
server.ssl.enabled=true
server.ssl.key-store-type=PKCS12
server.ssl.key-store=/etc/certs/keystore.p12
server.ssl.key-store-password=${CERTIFICATE_PASSWORD}
server.ssl.key-alias=springbootkey


springdoc.packagesToScan=com.smart
springdoc.api-docs.path=/api-docs
springdoc.swagger-ui.path=/swagger-ui-custom.html

#logging.level.com.baeldung.testloglevel=DEBUG
nowpayments.ipn.secret=${NOWPAYMENTS_IPN_SECRET}

# executionTime on/off
logging.executionTime.enabled=true

#logging.level.root=DEBUG

# Legacy JWT configuration (can be removed after Keycloak integration)
# smart.app.jwtSecret= ======================BezKoder=Spring===========================
# smart.app.jwtExpirationMs=86400000

# Actuator endpointlerini a√ß
management.endpoints.web.exposure.include=*
management.endpoints.web.base-path=/actuator
management.endpoint.health.show-details=always
management.endpoint.metrics.access=read-only
management.endpoint.prometheus.access=read-only
management.endpoint.loggers.access=read-only

# Keycloak Configuration
keycloak.auth-server-url=${KEYCLOAK_AUTH_SERVER_URL}
keycloak.realm=${KEYCLOAK_REALM}
keycloak.resource=${KEYCLOAK_CLIENT_ID}
keycloak.public-client=true
keycloak.bearer-only=true
keycloak.ssl-required=external

# Spring Security OAuth2 Resource Server
spring.security.oauth2.resourceserver.jwt.issuer-uri=${KEYCLOAK_AUTH_SERVER_URL}/realms/${KEYCLOAK_REALM}
spring.security.oauth2.resourceserver.jwt.jwk-set-uri=${KEYCLOAK_AUTH_SERVER_URL}/realms/${KEYCLOAK_REALM}/protocol/openid-connect/certs

# CORS Configuration for Keycloak
spring.security.oauth2.resourceserver.jwt.audiences=${KEYCLOAK_CLIENT_ID}